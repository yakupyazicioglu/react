import{j as m,n as p}from"./index-Gxlyw2hQ.js";import{r as o}from"./index-eK40FDle.js";import{r as E}from"./index.m-0-FAh1ao.js";const W=()=>{let e;const t=r=>l=>{const{left:x,width:h}=l[0].target.getBoundingClientRect();r({left:x,width:h-24})};return{mountedHook:(r,l)=>{l(r.getBoundingClientRect()),e=new ResizeObserver(t(l)),e.observe(r)},unmountedHook:()=>{e.disconnect()}}},i=Object.freeze({up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",pageup:"PageUp",pagedown:"PageDown"}),G=Object.values(i),A={passive:!0};function J(e,t=2){const n=t?Math.pow(10,t):1;return Math.round(e*n)/n}const Q=e=>Number.isFinite(parseFloat(e)),Y=(e,{min:t,max:n})=>Q(e)?Math.min(Math.max(Number(e),t),n):t;function Z({props:e,sliderState:t}){const n=a=>Y(a,{max:e.max,min:e.min});function b(a){const{left:s,width:c}=t.dimensions,d="touches"in a?a.touches[0].clientX:a.clientX;let w=Math.min(Math.max((d-s-16)/c,0),1)||0;return{value:e.min+w*(e.max-e.min)}}const r=()=>(t.position-e.min)/(e.max-e.min)*100,l=()=>r()/100*t.dimensions.width,x=a=>{const s=1/t.step;return Math.floor(a*s)/s},h={counter:0,repeatsBeforeAcceleration:3};function V(a){const s=a.key;if(!(e.disabled||!G.includes(s)))switch(a.preventDefault(),s){case i.left:case i.right:case i.up:case i.down:{const c=s===i.right||s===i.up?1:-1;let d=t.step;if(!e.preventAcceleration)if(a.repeat){h.counter++;const w=Math.min((h.counter-h.repeatsBeforeAcceleration)/100,.2);d=Math.max(t.step,Math.ceil((c>0?e.max-t.val:t.val-e.min)*w))}else h.counter=0;t.position=n(t.val+c*d);break}case i.home:t.position=e.min;break;case i.end:t.position=e.max;break;case i.pageup:case i.pagedown:{const c=s===i.pageup?1:-1,d=2,w=50;t.position=n(t.val+c*t.step*Math.max(d,Math.min(w,Math.ceil((e.max-e.min)/10/t.step))));break}}}function v(){}function M(){}function f(a){t.sliderPressed=!0,"touches"in a?(window.addEventListener("touchmove",g,A),window.addEventListener("touchend",y,{once:!0})):(window.addEventListener("mousemove",g,A),window.addEventListener("mouseup",y,{once:!0})),a.stopPropagation(),a.preventDefault()}function y(){t.sliderPressed=!1,window.removeEventListener("touchmove",g),window.removeEventListener("mousemove",g)}function D(a){g(a)}function g(a){var d;const{value:s}=b(a),c=J(s);(d=t.thumbEl)==null||d.focus(),t.position!==c&&(t.position=c)}return{handleKeyDown:V,handleFocus:v,handleBlur:M,handleMouseDown:f,handleClick:D,getThumbPosition:r,getThumbTransform:l,getShiftedChange:x}}function _({min:e=0,max:t=100,...n}){const{disabled:b,onChange:r}=n,l=o.useRef(null),x=o.useRef(null),{mountedHook:h,unmountedHook:V}=W();o.useEffect(()=>{if(l.current)return h(l.current,g),()=>V()},[l]);const[v,M]=o.useState(n.value),[f,y]=o.useState(n.value),[D,g]=o.useState({left:0,width:0}),[a,s]=o.useState(!1);o.useEffect(()=>{r&&r(v)},[v,r]);const c=o.useMemo(()=>n.step||1,[n]),d={get position(){return f},set position(u){y(u)},get sliderPressed(){return a},set sliderPressed(u){s(u)},get val(){return v},set val(u){M(u)},get thumbEl(){return x.current},get dimensions(){return D},get step(){return c}},{handleKeyDown:w,handleFocus:R,handleBlur:X,handleMouseDown:j,handleClick:P,getThumbPosition:T,getThumbTransform:H,getShiftedChange:z}=Z({props:{min:e,max:t,...n},sliderState:d}),q=o.useMemo(T,[T]),I=o.useMemo(()=>({left:0,right:100-q+"%"}),[q]),N=o.useMemo(H,[H]),U=o.useMemo(()=>({transform:"translateX("+N+"px)"}),[N]);return o.useEffect(()=>{if(f===n.value)return;const u=n.step?z(f):f;v!==u&&M(u)},[f,n.value,n.step]),o.useEffect(()=>{a||f===n.value||v===n.value||y(n.value)},[a,n.value]),m.jsxs("div",{className:p.wrapper,children:[m.jsx("div",{ref:l,className:E({[p.track]:!0,[p.trackDisabled]:b}),onClick:P}),m.jsx("div",{className:E({[p.activeTrack]:!0,[p.activeTrackDisabled]:b}),style:I,onClick:P}),m.jsx("div",{role:"slider",tabIndex:0,className:E({[p.thumb]:!0,[p.thumbDisabled]:b,[p.thumbEnabled]:!b}),ref:x,style:U,"aria-label":n["aria-label"],"aria-labelledby":n["aria-labelledby"],"aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":v,"aria-valuetext":n["aria-valuetext"],onMouseDown:u=>{j(u)},onTouchStart:u=>{j(u)},onBlur:X,onFocus:R,onKeyDown:u=>{w(u)}})]})}try{_.displayName="Slider",_.__docgenInfo={description:"",displayName:"Slider",props:{max:{defaultValue:{value:"100"},description:"The greatest value in the range of permitted values",name:"max",required:!1,type:{name:"number"}},min:{defaultValue:{value:"0"},description:"The lowest value in the range of permitted values",name:"min",required:!1,type:{name:"number"}},step:{defaultValue:null,description:"Specifies the value granularity",name:"step",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"The current value",name:"value",required:!0,type:{name:"number"}},disabled:{defaultValue:null,description:"Whether the slider is disabled",name:"disabled",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Handler that is called when the value of the slider changes",name:"onChange",required:!1,type:{name:"((value: number) => void)"}},"aria-label":{defaultValue:null,description:"String value that labels the slider",name:"aria-label",required:!1,type:{name:"string"}},"aria-labelledby":{defaultValue:null,description:"Identifies the element that labels the slider",name:"aria-labelledby",required:!1,type:{name:"string"}},"aria-valuetext":{defaultValue:null,description:"Human readable text alternative for the value",name:"aria-valuetext",required:!1,type:{name:"string"}}}}}catch{}const ne={title:"Forms/Slider"},k=()=>{const[e,t]=o.useState(25e5);return m.jsxs("div",{children:[m.jsx("output",{children:e}),m.jsx(_,{onChange:n=>t(n),value:e,min:1e3,max:1e7,step:1e3}),m.jsx("button",{onClick:()=>t(25e5),children:"Reset"})]})},C=()=>{const[e,t]=o.useState(625e3);return m.jsxs("div",{children:[m.jsx("output",{children:e}),m.jsx(_,{onChange:n=>t(n),value:e,disabled:!0,min:1e3,max:1e7,step:1e3})]})};var L,S,B;k.parameters={...k.parameters,docs:{...(L=k.parameters)==null?void 0:L.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(2_500_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={value => setValue(value)} value={value} min={1000} max={10_000_000} step={1000} />
      <button onClick={() => setValue(2_500_000)}>Reset</button>
    </div>;
}`,...(B=(S=k.parameters)==null?void 0:S.docs)==null?void 0:B.source}}};var F,O,K;C.parameters={...C.parameters,docs:{...(F=C.parameters)==null?void 0:F.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={val => setValue(val)} value={value} disabled min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(K=(O=C.parameters)==null?void 0:O.docs)==null?void 0:K.source}}};const ae=["Regular","Disabled"];export{C as Disabled,k as Regular,ae as __namedExportsOrder,ne as default};
